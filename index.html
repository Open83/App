<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saniya's Habit Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
<meta name="theme-color" content="#e91e63">
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #fce4ec, #f8bbd9, #e1bee7);
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  min-height: 100vh;
  position: relative;
}

.app-container {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  padding: 25px;
  border-radius: 30px;
  box-shadow: 0 15px 35px rgba(233, 30, 99, 0.2);
  max-width: 450px;
  width: 95%;
  text-align: center;
  position: relative;
  z-index: 2;
  border: 1px solid rgba(233, 30, 99, 0.1);
  margin: 20px auto;
}

h1 {
  color: #e91e63;
  font-family: 'Dancing Script', cursive;
  font-size: 32px;
  margin-bottom: 20px;
  text-shadow: 0 2px 10px rgba(233, 30, 99, 0.3);
  font-weight: 700;
}

/* Calendar */
.calendar {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 8px;
  margin-bottom: 25px;
  padding: 15px;
  background: linear-gradient(135deg, #fce4ec, #f8bbd9);
  border-radius: 20px;
  box-shadow: inset 0 2px 10px rgba(233, 30, 99, 0.1);
}

.calendar-day {
  padding: 12px 0;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.8);
  color: #333;
  font-weight: 600;
  position: relative;
  transition: all 0.3s ease;
  cursor: pointer;
  border: 2px solid transparent;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.calendar-day:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(233, 30, 99, 0.2);
}

.calendar-day.today {
  border: 2px solid #e91e63;
  box-shadow: 0 0 20px rgba(233, 30, 99, 0.5);
  transform: scale(1.1);
  background: linear-gradient(135deg, #e91e63, #f06292);
  color: white;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1.1); }
  50% { transform: scale(1.15); }
}

.calendar-day.completed {
  background: linear-gradient(135deg, #4caf50, #66bb6a);
  color: white;
  transform: scale(1.05);
  position: relative;
}

.calendar-day.completed::after {
  content: '‚úì';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 16px;
  color: white;
  font-weight: bold;
}

.calendar-day.locked {
  opacity: 0.4;
  pointer-events: none;
  cursor: default;
  background: #f5f5f5;
}

/* Habit Card */
.habit-card {
  background: linear-gradient(135deg, #fce4ec, #f8bbd9, #e1bee7);
  padding: 25px;
  border-radius: 25px;
  margin-bottom: 20px;
  box-shadow: 0 10px 30px rgba(233, 30, 99, 0.15);
  transition: all 0.3s ease;
  border: 1px solid rgba(233, 30, 99, 0.1);
}

.habit-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(233, 30, 99, 0.25);
}

.habit-card h2 {
  color: #e91e63;
  margin-bottom: 15px;
  font-size: 22px;
}

.habit-card p {
  font-size: 18px;
  color: #555;
  margin-bottom: 20px;
  line-height: 1.5;
}

#mark-done {
  margin-top: 15px;
  padding: 15px 30px;
  border: none;
  background: linear-gradient(135deg, #e91e63, #f06292);
  color: white;
  border-radius: 25px;
  cursor: pointer;
  font-size: 16px;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 5px 15px rgba(233, 30, 99, 0.3);
  text-transform: uppercase;
  letter-spacing: 1px;
}

#mark-done:hover {
  background: linear-gradient(135deg, #c2185b, #e91e63);
  transform: scale(1.05);
  box-shadow: 0 8px 25px rgba(233, 30, 99, 0.4);
}

#mark-done:disabled {
  background: #4caf50 !important;
  cursor: not-allowed;
  transform: none;
}

/* Progress Bar */
.progress-container {
  margin: 20px 0;
  text-align: left;
}

.progress-label {
  font-weight: 600;
  color: #e91e63;
  margin-bottom: 8px;
  font-size: 14px;
}

.progress-bar {
  width: 100%;
  height: 20px;
  background: rgba(233, 30, 99, 0.1);
  border-radius: 15px;
  overflow: hidden;
  position: relative;
  box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
}

#progress {
  width: 0%;
  height: 100%;
  background: linear-gradient(90deg, #e91e63, #f06292, #ba68c8);
  transition: width 0.8s ease;
  border-radius: 15px;
}

/* Note Box */
#note-box {
  margin-top: 15px;
  padding: 20px;
  background: linear-gradient(135deg, rgba(233, 30, 99, 0.05), rgba(186, 104, 200, 0.05));
  border-radius: 20px;
  min-height: 60px;
  font-weight: 500;
  font-size: 16px;
  border: 1px solid rgba(233, 30, 99, 0.1);
}

#note-message {
  margin: 0;
  color: #e91e63;
  line-height: 1.5;
}

/* Proof Gallery */
#proof-gallery {
  margin-top: 25px;
  text-align: left;
}

#proof-gallery h3 {
  color: #e91e63;
  margin-bottom: 15px;
  font-size: 18px;
}

#gallery-photos {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
  gap: 10px;
  max-height: 200px;
  overflow-y: auto;
  padding: 10px;
  background: rgba(233, 30, 99, 0.05);
  border-radius: 15px;
}

#gallery-photos img {
  width: 70px;
  height: 70px;
  border-radius: 15px;
  object-fit: cover;
  box-shadow: 0 4px 12px rgba(233, 30, 99, 0.2);
  transition: transform 0.3s ease;
  cursor: pointer;
}

#gallery-photos img:hover {
  transform: scale(1.1);
}

/* Install button */
#install-btn {
  margin-top: 20px;
  padding: 12px 25px;
  border: none;
  background: linear-gradient(135deg, #9c27b0, #ba68c8);
  color: white;
  border-radius: 20px;
  cursor: pointer;
  font-weight: 600;
  font-size: 14px;
  display: none;
  transition: all 0.3s ease;
}

/* Confetti canvas */
#confetti-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1000;
}

/* Popup */
.popup {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, #e91e63, #f06292);
  color: white;
  padding: 15px 25px;
  border-radius: 25px;
  font-weight: 600;
  box-shadow: 0 8px 25px rgba(233, 30, 99, 0.4);
  z-index: 999;
  display: none;
}

/* Modal */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(233, 30, 99, 0.95), rgba(186, 104, 200, 0.95));
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 22px;
  font-weight: 600;
  z-index: 1000;
  text-align: center;
  padding: 20px;
}

.modal.hidden {
  display: none !important;
}

.modal h2 {
  font-family: 'Dancing Script', cursive;
  font-size: 36px;
  margin-bottom: 15px;
}

.modal button {
  margin-top: 20px;
  padding: 12px 25px;
  border: none;
  background: white;
  color: #e91e63;
  border-radius: 15px;
  cursor: pointer;
  font-weight: 600;
  font-size: 16px;
  transition: all 0.3s ease;
}

/* Mobile responsive */
@media (max-width: 400px) {
  .app-container {
    padding: 20px;
    margin: 10px;
  }
  
  .calendar-day {
    font-size: 12px;
    padding: 8px 0;
    min-height: 30px;
  }
  
  h1 {
    font-size: 26px;
  }
  
  #mark-done {
    width: 100%;
    padding: 15px;
  }
}
</style>
</head>
<body>
<div class="app-container">
  <h1>üíñ Saniya's 30-Day Habit Tracker</h1>
  
  <!-- Calendar -->
  <div class="calendar" id="calendar">
    <!-- Calendar will be generated by JavaScript -->
  </div>
  
  <!-- Daily Habit Card -->
  <div class="habit-card" id="habit-card">
    <h2 id="habit-title">Today's Habit</h2>
    <p id="habit-desc">Complete your task to unlock a cute message!</p>
    <input type="file" id="photo-input" accept="image/*" style="display:none">
    <button id="mark-done">Mark as Done üì∏</button>
  </div>
  
  <!-- Progress Bar -->
  <div class="progress-container">
    <div class="progress-label">Progress: <span id="progress-text">0/30 days</span></div>
    <div class="progress-bar">
      <div id="progress"></div>
    </div>
  </div>
  
  <!-- Daily Note -->
  <div id="note-box">
    <p id="note-message">‚ú® Complete the task to see your special message!</p>
  </div>
  
  <!-- Proof Gallery -->
  <div id="proof-gallery">
    <h3>üì∏ My Proof Gallery</h3>
    <div id="gallery-photos">
      <p style="color: #999; text-align: center; padding: 20px;">No photos yet. Complete tasks to add proof! üì∏</p>
    </div>
  </div>
  
  <!-- Add to Home Screen Button -->
  <button id="install-btn">Add to Home Screen üì≤</button>
</div>

<!-- Confetti Canvas -->
<canvas id="confetti-canvas"></canvas>

<!-- Popups & Modals -->
<div id="popup" class="popup"></div>
<div id="modal" class="modal hidden"></div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  console.log("DOM Content Loaded - Starting app initialization");
  
  // Set the start date (September 25, 2025)
  const startDate = new Date(2025, 8, 21); // Month is 0-indexed
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  
  // Calculate days since start
  const diffTime = today - startDate;
  const dayIndex = Math.max(0, Math.floor(diffTime / (1000 * 60 * 60 * 24)));
  
  console.log('Start Date:', startDate.toDateString());
  console.log('Today:', today.toDateString());
  console.log('Day Index:', dayIndex);

  const habits = [
    "Drink your banana shake üíß",
    "Smile in the mirror for 1 minute üòä", 
    "Listen to your favorite song üé∂",
    "Write one thing you love about yourself ‚úçÔ∏è",
    "Take a 10 min walk/stretch üö∂‚Äç‚ôÄÔ∏è",
    "Send me a heart emoji ‚ù§Ô∏è on whatsApp",
    "Send me Nudes üíñ",
    "Eat one healthy fruit üçé",
    "Compliment yourself loudly ü™û",
    "Do 5 deep breaths üå¨Ô∏è",
    "Tarif karo meri üíñ",
    "Gaanaa sunaao üíÉ",
    "Think about one happy memory of us and write a messageüíñ",
    "Send me your selfie üòä",
    "Write down one dream/goal üåü",
    "Drink lemon water üçã",
    "Write down one thing you want to improve about me üíñ",
    "Share a song that reminds you of us üéµüíë",
    "Write one thing you love about me üòè",
    "Send a voice note saying something cute or funny üé§üòÇ",
    "Make a small ‚Äúmemory list‚Äù of our happiest moments together üìùüíñ",
    "Random ‚ÄúI love you‚Äù text days üíå",
    "Drink warm milk/herbal tea ü•õüçµ",
    "Text me a random ‚ÄúI‚Äôm thinking of you‚Äù üíå",
    "Make a best dish for me üòç",
    "Close eyes & imagine me üíë",
    "Write one word that describes 'us' ü•∞",
    "Do a funny dance and record a 5-second clip üíÉüòÇ",
    "Send me a message on my sex performanceüíï",
    "Think about our future together ‚ú®"
  ];

  // Get DOM elements
  const habitTitle = document.getElementById("habit-title");
  const habitDesc = document.getElementById("habit-desc");
  const markDoneBtn = document.getElementById("mark-done");
  const photoInput = document.getElementById("photo-input");
  const noteMessage = document.getElementById("note-message");
  const progress = document.getElementById("progress");
  const progressText = document.getElementById("progress-text");
  const galleryPhotos = document.getElementById("gallery-photos");
  const calendar = document.getElementById("calendar");
  const installBtn = document.getElementById("install-btn");
  const confettiCanvas = document.getElementById("confetti-canvas");
  const popup = document.getElementById("popup");
  const modal = document.getElementById("modal");

  // Check if elements exist
  if (!calendar) {
    console.error("Calendar element not found!");
    return;
  }

  // Set canvas size
  const confettiCtx = confettiCanvas.getContext('2d');
  function resizeCanvas() {
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;
  }
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);

  // Helper functions
  function showPopup(message) {
    popup.textContent = message;
    popup.style.display = 'block';
    setTimeout(() => popup.style.display = 'none', 3000);
  }

  function showModal(title, msg) {
    modal.innerHTML = `<h2>${title}</h2><p>${msg}</p><button onclick="hideModal()">Close</button>`;
    modal.classList.remove('hidden');
  }

  window.hideModal = function() {
    modal.classList.add('hidden');
  }

  // Create calendar with actual dates
  function createCalendar() {
    console.log("Creating calendar...");
    calendar.innerHTML = '';
    
    for (let i = 0; i < 30; i++) {
      const dayDiv = document.createElement("div");
      dayDiv.classList.add("calendar-day");
      
      // Calculate the actual date for this day
      const currentDate = new Date(startDate);
      currentDate.setDate(startDate.getDate() + i);
      const dayNumber = currentDate.getDate();
      
      dayDiv.textContent = dayNumber;
      dayDiv.title = currentDate.toLocaleDateString();
      
      // Add classes based on status
      if (i === dayIndex) {
        dayDiv.classList.add("today");
        console.log(`Today is day ${i + 1} (${dayNumber})`);
      }
      
      if (localStorage.getItem(`habit-${i}`)) {
        dayDiv.classList.add("completed");
      }
      
      if (i > dayIndex) {
        dayDiv.classList.add("locked");
      }
      
      calendar.appendChild(dayDiv);
    }
    console.log("Calendar created successfully");
  }

  // Set current habit
  function setCurrentHabit() {
    if (dayIndex >= 30) {
      habitTitle.textContent = "Challenge Complete! üéâ";
      habitDesc.textContent = "You've completed all 30 days! Amazing job! üíñ";
      markDoneBtn.style.display = 'none';
    } else {
      habitTitle.textContent = `Day ${dayIndex + 1} Habit`;
      habitDesc.textContent = habits[dayIndex] || "Keep going strong! üí™";
      
      if (localStorage.getItem(`habit-${dayIndex}`)) {
        markDoneBtn.textContent = "Already Done ‚úÖ";
        markDoneBtn.disabled = true;
      }
    }
  }

  // Load gallery
  function loadGallery() {
    const photos = JSON.parse(localStorage.getItem("proof-gallery") || "[]");
    
    if (photos.length === 0) {
      galleryPhotos.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">No photos yet. Complete tasks to add proof! üì∏</p>';
      return;
    }
    
    galleryPhotos.innerHTML = "";
    photos.forEach((src, index) => {
      const img = document.createElement("img");
      img.src = src;
      img.alt = `Proof ${index + 1}`;
      img.onclick = () => {
        showModal("üì∏ Proof Photo", `<img src="${src}" style="max-width: 90%; max-height: 70vh; border-radius: 15px; margin-top: 15px;">`);
      };
      galleryPhotos.appendChild(img);
    });
  }

  // Update progress
  function updateProgress() {
    let completed = 0;
    for (let i = 0; i < 30; i++) {
      if (localStorage.getItem(`habit-${i}`)) {
        completed++;
      }
    }
    const percentage = (completed / 30) * 100;
    progress.style.width = percentage + "%";
    progressText.textContent = `${completed}/30 days (${Math.round(percentage)}%)`;
  }

  // Short confetti animation (2 seconds only)
  function triggerConfetti() {
    const confettiArray = [];
    const colors = ['#e91e63', '#f06292', '#ba68c8', '#ab47bc', '#ff4081'];
    let animationId;
    
    for (let i = 0; i < 100; i++) {
      confettiArray.push({
        x: Math.random() * window.innerWidth,
        y: Math.random() * window.innerHeight - window.innerHeight,
        r: Math.random() * 6 + 3,
        d: Math.random() * 50 + 10,
        color: colors[Math.floor(Math.random() * colors.length)],
        tilt: Math.floor(Math.random() * 10) - 10,
        tiltAngleIncremental: Math.random() * 0.07 + 0.05,
        tiltAngle: 0
      });
    }

    function draw() {
      confettiCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      
      confettiArray.forEach(confetti => {
        confettiCtx.beginPath();
        confettiCtx.lineWidth = confetti.r / 2;
        confettiCtx.strokeStyle = confetti.color;
        confettiCtx.moveTo(confetti.x + confetti.tilt + confetti.r, confetti.y);
        confettiCtx.lineTo(confetti.x + confetti.tilt, confetti.y + confetti.tilt + confetti.r);
        confettiCtx.stroke();
        
        confetti.tiltAngle += confetti.tiltAngleIncremental;
        confetti.y += (Math.cos(confetti.d) + 3 + confetti.r / 2) / 2;
        confetti.tilt = Math.sin(confetti.tiltAngle - confetti.r / 2) * confetti.r / 2;
        
        if (confetti.y > window.innerHeight) {
          confetti.y = -10;
        }
      });
      
      animationId = requestAnimationFrame(draw);
    }
    
    draw();
    
    // Stop confetti after exactly 2 seconds
    setTimeout(() => {
      if (animationId) {
        cancelAnimationFrame(animationId);
      }
      confettiCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      console.log("Confetti stopped after 2 seconds");
    }, 2000);
  }

  // Mark habit as done
  markDoneBtn.addEventListener("click", function() {
    if (dayIndex >= 30 || localStorage.getItem(`habit-${dayIndex}`)) {
      return;
    }
    photoInput.click();
  });

  photoInput.addEventListener("change", function(e) {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function() {
      const photos = JSON.parse(localStorage.getItem("proof-gallery") || "[]");
      photos.push(reader.result);
      localStorage.setItem("proof-gallery", JSON.stringify(photos));
      localStorage.setItem(`habit-${dayIndex}`, "true");
      
      // Update UI
      loadGallery();
      updateProgress();
      createCalendar();
      
      // Update button
      markDoneBtn.textContent = "Already Done ‚úÖ";
      markDoneBtn.disabled = true;
      
      // Show completion message
      const messages = [
        "‚ú® Amazing job, jaan! You're doing great! üíñ",
        "üåü So proud of you! Keep going! üòò",
        "üíï You're incredible! Love you! ü•∞",
        "üéâ Another step closer to our goal! üí™",
        "‚ù§Ô∏è You make me so happy! Well done! üòä"
      ];
      
      const randomMessage = messages[Math.floor(Math.random() * messages.length)];
      noteMessage.textContent = randomMessage;
      
      // Trigger 2-second confetti
      triggerConfetti();

      // Check for weekly bonus
      const weekStart = Math.floor(dayIndex / 7) * 7;
      let weekComplete = true;
      for (let i = weekStart; i < weekStart + 7 && i < 30; i++) {
        if (!localStorage.getItem(`habit-${i}`)) {
          weekComplete = false;
          break;
        }
      }
      
      if (weekComplete) {
        setTimeout(() => {
          showPopup("üéÅ Weekly bonus unlocked! You're amazing! üíå");
        }, 500);
      }

      // Check for month completion
      if (dayIndex === 29) {
        setTimeout(() => {
          showModal("üíñ 30-Day Challenge Complete! üíñ", "Jaan, you did it! I'm so proud of you! You're absolutely amazing! üòò‚ù§Ô∏è‚ú®");
        }, 700);
      }
    };
    
    reader.readAsDataURL(file);
  });

  // PWA Install
  let deferredPrompt;
  
  window.addEventListener('beforeinstallprompt', function(e) {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = "block";
  });

  installBtn.addEventListener('click', function() {
    installBtn.style.display = "none";
    if (deferredPrompt) {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then(function(result) {
        if (result.outcome === 'accepted') {
          showPopup("üéâ App installed successfully!");
        }
        deferredPrompt = null;
      });
    }
  });

  // Initialize everything
  console.log("Initializing app...");
  createCalendar();
  setCurrentHabit();
  loadGallery();
  updateProgress();
  console.log("App initialized successfully! üíñ");
});
</script>
</body>
</html>



